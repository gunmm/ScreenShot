# 提案：增加长截图结果的手动裁剪编辑功能

## Motivations（动机）
当前长截图功能依赖 OpenCV 自动计算相邻图片的重叠区域和裁剪点（`validRanges`）。虽然在大多数滚动场景下自动拼接工作良好，但由于内容复杂性或滚动不均匀，有时自动计算的裁剪点可能不理想（出现内容重复或缺失）。

为了赋予用户最终控制权，我们需要在拼接完成后提供一个“编辑”入口，允许用户手动介入，调整每张组成最终长图的分片的上下裁剪位置（`Top` 和 `Bottom` 切割点），从而完美修复拼接瑕疵。

## Scope（范围）
- 在 `ViewController` 的拼接结果页增加“编辑 / Edit”按钮。
- 新增 `EditViewController`，用于展示所有的分片，并允许分别调整每张图的上下边缘裁剪位置。
- 修改 `ImageStitcher`，使其能够支持根据传入的自定义裁剪范围（`validRanges`）进行强制拼接。
- 将手动编辑后的结果替换主页面的预览图，并支持分享和保存。

## Non-goals（非目标）
- 当前不提供图像旋转、涂抹、添加文字等其他维度的编辑功能。
- 不修改原有的 OpenCV 自动特征匹配逻辑。

## Acceptance Criteria（验收标准）
1. 自动拼接完成后，如果生成了结果，主页面必须激活“编辑”按钮。
2. 点击编辑后，进入全屏或模态的编辑页面。
3. 编辑页面中，可以直观看到每张图片的前后关系，并可以通过 UI 控件（拖拽线/滑块等）实时改变切割点。
4. 调整结束后，点击“确认”，应用返回主页面，最终结果图根据用户的自定义裁剪点重新生成。
5. 能够正确保存和分享编辑后的图片。

## Risks & Mitigations（风险与对策）
- **性能问题**：如果分片很多，拖动裁剪或者实时渲染可能卡顿。
  - **对策**：在 `EditViewController` 中调整时可以先进行粗略预览，或者仅仅在滑动结束时刷新拼接结果，避免高频率的完整图像重绘。
- **内存占用**：保留所有分片的 `UIImage` 会占用较多内存。
  - **对策**：由于自动拼接已经将图片加载到内存中，编辑视图可直接复用这批图片，避免重复加载。
